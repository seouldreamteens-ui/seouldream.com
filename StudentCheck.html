<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ë“œë¦¼í‹´ìŠ¤ ì¶œì„ì²´í¬</title>
<style>
  :root {
    --primary:#2563EB;--primary-lt:#EFF6FF;--primary-dark:#1D4ED8;
    --green:#16A34A;--green-lt:#F0FDF4;
    --gray-100:#F3F4F6;--gray-200:#E5E7EB;--gray-400:#9CA3AF;
    --gray-600:#4B5563;--gray-800:#1F2937;
    --radius:14px;--radius-sm:8px;
    --font-main:'Pretendard','Noto Sans KR',sans-serif;
    --shadow:0 4px 20px rgba(0,0,0,.1);
  }
  *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
  body{font-family:var(--font-main);background:linear-gradient(135deg,#EFF6FF 0%,#F8FAFF 50%,#F0FDF4 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px;}

  .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:28px 24px;width:100%;max-width:400px;}
  .logo{text-align:center;margin-bottom:24px;}
  .logo-icon{font-size:2.8rem;display:block;margin-bottom:6px;}
  .logo-title{font-size:1.3rem;font-weight:800;color:var(--gray-800);}
  .logo-sub{font-size:.8rem;color:var(--gray-400);margin-top:3px;}

  /* ì§„í–‰ ë‹¨ê³„ */
  .steps{display:flex;align-items:center;justify-content:center;gap:6px;margin-bottom:24px;}
  .step{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.72rem;font-weight:700;background:var(--gray-100);color:var(--gray-400);flex-shrink:0;}
  .step.active{background:var(--primary);color:#fff;}
  .step.done{background:var(--green);color:#fff;}
  .step-line{flex:1;height:2px;background:var(--gray-200);max-width:40px;}
  .step-line.done{background:var(--green);}

  /* ë‹¨ê³„ ë¼ë²¨ */
  .step-label{font-size:.8rem;font-weight:700;color:var(--gray-600);margin-bottom:14px;display:flex;align-items:center;gap:6px;}
  .step-label .num{background:var(--primary);color:#fff;width:22px;height:22px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:800;flex-shrink:0;}

  /* ì„ íƒ/ì…ë ¥ */
  select,input[type=text]{width:100%;padding:14px 16px;border:1.5px solid var(--gray-200);border-radius:var(--radius-sm);font-family:var(--font-main);font-size:.95rem;color:var(--gray-800);background:#fff;outline:none;transition:border-color .2s;appearance:none;-webkit-appearance:none;}
  select:focus,input[type=text]:focus{border-color:var(--primary);}
  .select-wrap{position:relative;}
  .select-wrap::after{content:"â–¼";position:absolute;right:14px;top:50%;transform:translateY(-50%);font-size:.65rem;color:var(--gray-400);pointer-events:none;}

  /* ë²„íŠ¼ */
  .btn{width:100%;padding:15px;border:none;border-radius:var(--radius-sm);font-family:var(--font-main);font-size:1rem;font-weight:700;cursor:pointer;transition:all .15s;display:flex;align-items:center;justify-content:center;gap:8px;}
  .btn-primary{background:var(--primary);color:#fff;}
  .btn-primary:hover{background:var(--primary-dark);}
  .btn-primary:disabled{background:var(--gray-200);color:var(--gray-400);cursor:not-allowed;}
  .btn-outline{background:#fff;color:var(--primary);border:1.5px solid var(--primary);}
  .btn-outline:hover{background:var(--primary-lt);}
  .btn-green{background:var(--green);color:#fff;}

  /* í•™ìƒ ëª©ë¡ */
  .student-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-bottom:16px;max-height:320px;overflow-y:auto;}
  .student-btn{padding:12px 8px;border:1.5px solid var(--gray-200);border-radius:var(--radius-sm);background:#fff;font-family:var(--font-main);font-size:.88rem;font-weight:600;color:var(--gray-700);cursor:pointer;text-align:center;transition:all .15s;}
  .student-btn:hover{border-color:var(--primary);color:var(--primary);background:var(--primary-lt);}
  .student-btn.selected{border-color:var(--primary);background:var(--primary);color:#fff;}

  /* ë‚ ì§œ í‘œì‹œ */
  .date-chip{background:var(--primary-lt);border:1px solid #BAE6FD;border-radius:20px;padding:6px 16px;font-size:.8rem;font-weight:700;color:var(--primary);display:inline-flex;align-items:center;gap:5px;}

  /* í™•ì¸ ì¹´ë“œ */
  .confirm-info{background:var(--gray-100);border-radius:var(--radius-sm);padding:16px;margin-bottom:16px;}
  .confirm-row{display:flex;justify-content:space-between;align-items:center;padding:5px 0;font-size:.88rem;}
  .confirm-label{color:var(--gray-400);font-weight:500;}
  .confirm-value{font-weight:700;color:var(--gray-800);}

  /* ì„±ê³µ í™”ë©´ */
  .success-wrap{text-align:center;}
  .success-icon{font-size:4rem;display:block;margin-bottom:12px;animation:pop .4s cubic-bezier(.175,.885,.32,1.275);}
  @keyframes pop{0%{transform:scale(0)}100%{transform:scale(1)}}
  .success-title{font-size:1.3rem;font-weight:800;color:var(--green);margin-bottom:6px;}
  .success-sub{font-size:.85rem;color:var(--gray-400);}
  .success-detail{background:var(--green-lt);border-radius:var(--radius-sm);padding:14px 16px;margin:16px 0;text-align:left;}
  .success-detail .row{display:flex;justify-content:space-between;padding:4px 0;font-size:.85rem;}

  /* ì´ë¯¸ ì¶œì„ */
  .already-wrap{text-align:center;}
  .already-icon{font-size:3rem;display:block;margin-bottom:8px;}

  /* ì˜¤ë¥˜ ë©”ì‹œì§€ */
  .error-msg{background:#FEF2F2;border:1px solid #FECACA;border-radius:var(--radius-sm);padding:10px 14px;font-size:.82rem;color:#DC2626;margin-top:10px;display:none;}
  .error-msg.show{display:block;}

  /* ë¡œë”© */
  .loading{text-align:center;padding:20px;color:var(--gray-400);font-size:.85rem;}
  .spin{display:inline-block;animation:spin 1s linear infinite;}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* ê²€ìƒ‰ */
  .search-wrap{position:relative;margin-bottom:10px;}
  .search-wrap input{padding-left:36px;}
  .search-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:.9rem;color:var(--gray-400);}

  .gap{height:10px;}
  .gap-sm{height:6px;}
</style>
</head>
<body>
<div class="card" id="app">
  <!-- ì´ˆê¸°: ë¡œë”© -->
  <div class="loading"><span class="spin">â³</span> ë¡œë”© ì¤‘...</div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì„¤ì •
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const GAS_URL = ''; // â† êµì‚¬ìš© ì•±ê³¼ ë™ì¼í•œ GAS ë°°í¬ URL ë¶™ì—¬ë„£ê¸°

// ì•± ìƒíƒœ
let state = {
  step: 1,          // 1: ë°˜ì„ íƒ, 2: ì´ë¦„ì„ íƒ, 3: í™•ì¸, 4: ì™„ë£Œ
  classes: [],
  students: [],
  selectedClass: '',
  selectedName: '',
  selectedStudentId: '',
  sundayDate: '',    // YYYY-MM-DD
  sundayLabel: '',   // í‘œì‹œìš© (ì˜ˆ: 2ì›” 9ì¼ ì£¼ì¼)
  searchQuery: '',
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GAS í†µì‹ 
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function callGAS(action, payload = {}) {
  if (!GAS_URL) return { success: false, message: 'GAS_URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.' };
  const formData = new URLSearchParams();
  formData.append('action', action);
  formData.append('payload', JSON.stringify(payload));
  const res = await fetch(GAS_URL, { method: 'POST', body: formData });
  const text = await res.text();
  try { return JSON.parse(text); }
  catch(e) { return { success: false, message: 'ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜' }; }
}

function formatDate(dateStr) {
  if (!dateStr) return '';
  const [y, m, d] = dateStr.split('-');
  const days = ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];
  const date = new Date(parseInt(y), parseInt(m)-1, parseInt(d));
  return `${parseInt(m)}ì›” ${parseInt(d)}ì¼ (${days[date.getDay()]})`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì´ˆê¸°í™”
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function init() {
  if (!GAS_URL) {
    render('error_config');
    return;
  }
  try {
    const [classRes, sundayRes] = await Promise.all([
      callGAS('getClassList'),
      callGAS('getNearestSunday'),
    ]);
    if (!classRes.success) throw new Error(classRes.message);
    state.classes = classRes.data || [];
    state.sundayDate  = sundayRes.success ? sundayRes.data : '';
    state.sundayLabel = state.sundayDate ? formatDate(state.sundayDate) : 'ë‚ ì§œ í™•ì¸ ì¤‘';
    state.step = 1;
    render('step1');
  } catch(e) {
    render('error', e.message);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ë Œë”ë§
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function render(view, extra) {
  const app = document.getElementById('app');
  switch(view) {
    case 'error_config': app.innerHTML = renderErrorConfig(); break;
    case 'error': app.innerHTML = renderError(extra); break;
    case 'step1': app.innerHTML = renderStep1(); break;
    case 'step2': app.innerHTML = renderStep2(); break;
    case 'step3': app.innerHTML = renderStep3(); break;
    case 'success': app.innerHTML = renderSuccess(); break;
    case 'already': app.innerHTML = renderAlready(); break;
    case 'loading': app.innerHTML = `<div class="loading"><span class="spin">â³</span> ${extra||'ì²˜ë¦¬ ì¤‘...'}</div>`; break;
  }
}

function stepsHtml(current) {
  const labels = ['ë°˜', 'ì´ë¦„', 'í™•ì¸'];
  return `<div class="steps">
    ${labels.map((l,i) => {
      const n = i+1;
      const cls = n < current ? 'done' : n === current ? 'active' : '';
      return `${i>0 ? `<div class="step-line${n <= current ? ' done':''}"></div>` : ''}
              <div class="step ${cls}">${n < current ? 'âœ“' : n}</div>`;
    }).join('')}
  </div>`;
}

function logoHtml() {
  return `<div class="logo">
    <span class="logo-icon">âœï¸</span>
    <div class="logo-title">ë“œë¦¼í‹´ìŠ¤ ì¶œì„ì²´í¬</div>
    <div class="logo-sub">í•™ìƒ ìì²´ ì¶œì„ ì‹œìŠ¤í…œ</div>
  </div>`;
}

// â”€â”€ Step 1: ë°˜ ì„ íƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderStep1() {
  const opts = state.classes.map(c =>
    `<option value="${c}" ${c === state.selectedClass ? 'selected':''}>${c}</option>`
  ).join('');
  return `
    ${logoHtml()}
    ${stepsHtml(1)}
    <div style="text-align:center;margin-bottom:16px;">
      <span class="date-chip">ğŸ“… ${state.sundayLabel}</span>
    </div>
    <div class="step-label"><span class="num">1</span> ë°˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <div class="select-wrap">
      <select id="classSelect" onchange="onClassChange(this.value)">
        <option value="">-- ë°˜ ì„ íƒ --</option>
        ${opts}
      </select>
    </div>
    <div class="gap"></div>
    <button class="btn btn-primary" onclick="goStep2()" ${!state.selectedClass ? 'disabled':''}>
      ë‹¤ìŒ â†’
    </button>
    <div id="err" class="error-msg"></div>`;
}

function onClassChange(val) {
  state.selectedClass = val;
  document.querySelector('.btn-primary').disabled = !val;
}

async function goStep2() {
  if (!state.selectedClass) return;
  render('loading', 'í•™ìƒ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...');
  const r = await callGAS('getStudentsByClass', { classGroup: state.selectedClass });
  if (!r.success) { render('error', r.message); return; }
  state.students = r.data || [];
  state.selectedName = '';
  state.step = 2;
  render('step2');
}

// â”€â”€ Step 2: ì´ë¦„ ì„ íƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderStep2() {
  const q = state.searchQuery.toLowerCase();
  const filtered = state.students.filter(s => !q || s.name.includes(q));

  const studentBtns = filtered.map(s => `
    <button class="student-btn ${s.name === state.selectedName ? 'selected':''}"
      onclick="selectStudent('${s.name}','${s.id}')">
      ${s.name}
    </button>`).join('');

  return `
    ${logoHtml()}
    ${stepsHtml(2)}
    <div class="step-label"><span class="num">2</span> ì´ë¦„ì„ ì„ íƒí•´ì£¼ì„¸ìš”
      <span style="font-size:.72rem;color:var(--gray-400);margin-left:4px;">${state.selectedClass}</span>
    </div>
    <div class="search-wrap">
      <span class="search-icon">ğŸ”</span>
      <input type="text" placeholder="ì´ë¦„ ê²€ìƒ‰..." value="${state.searchQuery}"
        oninput="onSearch(this.value)">
    </div>
    ${filtered.length > 0
      ? `<div class="student-grid">${studentBtns}</div>`
      : `<div class="loading" style="padding:16px;">í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.</div>`}
    <div style="display:flex;gap:8px;">
      <button class="btn btn-outline" onclick="goBack(1)" style="flex:1;">â† ë’¤ë¡œ</button>
      <button class="btn btn-primary" onclick="goStep3()" style="flex:2;"
        ${!state.selectedName ? 'disabled':''}>ë‹¤ìŒ â†’</button>
    </div>
    <div id="err" class="error-msg"></div>`;
}

function onSearch(val) {
  state.searchQuery = val;
  render('step2');
  // ê²€ìƒ‰ì°½ í¬ì»¤ìŠ¤ ìœ ì§€ & ì»¤ì„œ ìœ„ì¹˜ ë³µì›
  const input = document.querySelector('.search-wrap input');
  if (input) { input.focus(); input.setSelectionRange(val.length, val.length); }
}

function selectStudent(name, id) {
  state.selectedName = name;
  state.selectedStudentId = id;
  render('step2');
}

async function goStep3() {
  if (!state.selectedName) return;
  state.step = 3;
  render('step3');
}

// â”€â”€ Step 3: í™•ì¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderStep3() {
  return `
    ${logoHtml()}
    ${stepsHtml(3)}
    <div class="step-label"><span class="num">3</span> ì¶œì„ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”</div>
    <div class="confirm-info">
      <div class="confirm-row">
        <span class="confirm-label">ë°˜</span>
        <span class="confirm-value">${state.selectedClass}</span>
      </div>
      <div class="confirm-row" style="border-top:1px solid var(--gray-200);margin-top:4px;padding-top:8px;">
        <span class="confirm-label">ì´ë¦„</span>
        <span class="confirm-value" style="font-size:1.05rem;color:var(--primary);">${state.selectedName}</span>
      </div>
      <div class="confirm-row" style="border-top:1px solid var(--gray-200);margin-top:4px;padding-top:8px;">
        <span class="confirm-label">ì¶œì„ ë‚ ì§œ</span>
        <span class="confirm-value">${state.sundayLabel}</span>
      </div>
    </div>
    <p style="font-size:.8rem;color:var(--gray-400);text-align:center;margin-bottom:14px;">
      ìœ„ ì •ë³´ê°€ ë§ìœ¼ë©´ ì¶œì„ ì™„ë£Œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.
    </p>
    <button class="btn btn-green" onclick="submitAttendance()">
      âœ… ì¶œì„ ì™„ë£Œ
    </button>
    <div class="gap-sm"></div>
    <button class="btn btn-outline" onclick="goBack(2)">â† ì´ë¦„ ë‹¤ì‹œ ì„ íƒ</button>
    <div id="err" class="error-msg"></div>`;
}

async function submitAttendance() {
  const submitBtn = document.querySelector('.btn-green');
  if (submitBtn) { submitBtn.disabled = true; submitBtn.textContent = 'â³ ì €ì¥ ì¤‘...'; }

  const r = await callGAS('saveStudentSelfAttendance', {
    classGroup: state.selectedClass,
    name: state.selectedName,
    date: state.sundayDate,
  });

  if (r.success) {
    if (r.data && r.data.alreadyChecked) {
      render('already');
    } else {
      render('success');
    }
  } else {
    const errEl = document.getElementById('err');
    if (errEl) { errEl.textContent = r.message || 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'; errEl.classList.add('show'); }
    if (submitBtn) { submitBtn.disabled = false; submitBtn.textContent = 'âœ… ì¶œì„ ì™„ë£Œ'; }
  }
}

// â”€â”€ ì™„ë£Œ í™”ë©´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderSuccess() {
  return `
    <div class="success-wrap">
      ${logoHtml()}
      <span class="success-icon">ğŸ‰</span>
      <div class="success-title">ì¶œì„ ì™„ë£Œ!</div>
      <div class="success-sub">ì¶œì„ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤</div>
      <div class="success-detail">
        <div class="row"><span style="color:var(--gray-400);">ë°˜</span><span style="font-weight:700;">${state.selectedClass}</span></div>
        <div class="row" style="border-top:1px solid var(--gray-200);margin-top:4px;padding-top:6px;">
          <span style="color:var(--gray-400);">ì´ë¦„</span>
          <span style="font-weight:700;color:var(--green);">${state.selectedName}</span>
        </div>
        <div class="row" style="border-top:1px solid var(--gray-200);margin-top:4px;padding-top:6px;">
          <span style="color:var(--gray-400);">ë‚ ì§œ</span>
          <span style="font-weight:700;">${state.sundayLabel}</span>
        </div>
      </div>
      <p style="font-size:.78rem;color:var(--gray-400);margin-bottom:16px;">
        êµì‚¬ ì•±ì—ì„œë„ ì¶œì„ì´ í‘œì‹œë©ë‹ˆë‹¤
      </p>
      <button class="btn btn-outline" onclick="resetApp()">ë‹¤ë¥¸ í•™ìƒ ì¶œì„ì²´í¬</button>
    </div>`;
}

function renderAlready() {
  return `
    <div class="already-wrap">
      ${logoHtml()}
      <span class="already-icon">âœ…</span>
      <div style="font-size:1.2rem;font-weight:800;color:var(--primary);margin-bottom:6px;">ì´ë¯¸ ì¶œì„ ì²˜ë¦¬ë¨</div>
      <div style="font-size:.85rem;color:var(--gray-400);margin-bottom:16px;">
        <strong style="color:var(--gray-700);">${state.selectedName}</strong> í•™ìƒì€
        ì˜¤ëŠ˜ ì´ë¯¸ ì¶œì„ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.
      </div>
      <div style="background:var(--primary-lt);border-radius:var(--radius-sm);padding:12px;margin-bottom:16px;font-size:.85rem;color:var(--primary);font-weight:600;">
        ğŸ“… ${state.sundayLabel}
      </div>
      <button class="btn btn-outline" onclick="resetApp()">ë‹¤ë¥¸ í•™ìƒ ì¶œì„ì²´í¬</button>
    </div>`;
}

// â”€â”€ ì„¤ì • ì˜¤ë¥˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderErrorConfig() {
  return `
    ${logoHtml()}
    <div style="text-align:center;padding:16px 0;">
      <div style="font-size:2rem;margin-bottom:8px;">âš™ï¸</div>
      <div style="font-weight:700;color:var(--gray-800);margin-bottom:8px;">GAS_URL ì„¤ì • í•„ìš”</div>
      <div style="font-size:.82rem;color:var(--gray-400);line-height:1.6;">
        ì´ íŒŒì¼ì˜ <code style="background:var(--gray-100);padding:2px 6px;border-radius:4px;font-size:.78rem;">GAS_URL</code> ë³€ìˆ˜ì—
        êµì‚¬ìš© ì•±ê³¼ ë™ì¼í•œ ë°°í¬ URLì„ ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”.
      </div>
    </div>`;
}

function renderError(msg) {
  return `
    ${logoHtml()}
    <div style="text-align:center;padding:16px 0;">
      <div style="font-size:2rem;margin-bottom:8px;">âš ï¸</div>
      <div style="font-weight:700;color:#DC2626;margin-bottom:8px;">ì—°ê²° ì˜¤ë¥˜</div>
      <div style="font-size:.82rem;color:var(--gray-400);">${msg||''}</div>
      <button class="btn btn-outline" style="margin-top:16px;" onclick="init()">ë‹¤ì‹œ ì‹œë„</button>
    </div>`;
}

// â”€â”€ ìœ í‹¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function goBack(step) {
  state.step = step;
  state.searchQuery = '';
  render('step' + step);
}

function resetApp() {
  state.selectedClass = '';
  state.selectedName = '';
  state.selectedStudentId = '';
  state.searchQuery = '';
  state.step = 1;
  render('step1');
}

// â”€â”€ ì‹œì‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
init();
</script>
</body>
</html>